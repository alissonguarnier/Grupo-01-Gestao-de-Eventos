{% extends 'relatorios/base_pdf.html' %}

{% block content %}
<style>
  /* 1. Configuração da Página */
  @page {
    size: a4 landscape;
    margin: 0.5cm;
  }

  body {
    font-family: 'Helvetica', 'Arial', sans-serif;
    margin: 0;
    padding: 0;
    background-color: #fff;
  }

  /* 2. Tabela Mestra (4 Linhas agora) */
  .tabela-mestra {
    width: 100%;
    height: 190mm;
    border: 5px double #ffffff;
    border-collapse: collapse;
  }

  /* --- DEFINIÇÃO DAS 4 ÁREAS --- */

  /* LINHA 1: Cabeçalho (20%) */
  .celula-topo {
    height: 38mm;
    vertical-align: top;
    padding-top: 35px;
    text-align: center;
  }

  /* LINHA 2: Conteúdo Principal (45%) */
  .celula-meio {
    height: 85mm;
    vertical-align: middle;
    text-align: center;
  }

  /* LINHA 3: Assinaturas (20%) */
  .celula-assinaturas {
    height: 38mm;
    vertical-align: bottom;
    /* Assinaturas ficam na parte de baixo dessa área */
    text-align: center;
    /* Centraliza a tabela de assinaturas horizontalmente */
    padding-bottom: 10px;
  }

  /* LINHA 4: Validação (15%) */
  .celula-validacao {
    height: 29mm;
    vertical-align: bottom;
    /* Fica colado no rodapé */
    text-align: right;
    /* Alinha à direita */
    padding-right: 30px;
    padding-bottom: 20px;
  }

  /* --- ESTILOS DE TEXTO --- */
  .titulo {
    font-family: 'Times New Roman', serif;
    font-size: 46px;
    font-weight: bold;
    color: #003366;
    text-transform: uppercase;
    margin-bottom: 5px;
  }

  .subtitulo {
    font-family: 'Times New Roman', serif;
    font-size: 22px;
    color: #666;
    font-style: italic;
  }

  .intro {
    font-size: 18px;
    color: #444;
    margin-bottom: 5px;
  }

  .nome-aluno {
    font-family: 'Times New Roman', serif;
    font-size: 40px;
    font-weight: bold;
    color: #000;
    border-bottom: 1px solid #999;
    display: inline-block;
    padding-bottom: 5px;
    margin: 15px 0;
    min-width: 65%;
  }

  .texto-detalhe {
    font-size: 18px;
    line-height: 1.6;
    color: #333;
    margin: 0 50px;
  }

  /* --- ESTILO DAS ASSINATURAS --- */
  .tab-ass {
    width: 70%;
    /* Largura reduzida para centralizar visualmente */
    margin: 0 auto;
    /* O segredo para centralizar a tabela na célula */
  }

  .tab-ass td {
    width: 50%;
    text-align: center;
    vertical-align: bottom;
    padding: 0 15px;
  }

  .linha-ass {
    border-top: 2px solid #333;
    width: 90%;
    margin: 0 auto 10px auto;
  }

  .cargo {
    font-family: 'Times New Roman', serif;
    font-weight: bold;
    font-size: 25px;
    color: #003366;
  }

  .inst {
    font-size: 21px;
    color: #555;
    font-style: italic;
    font-family: 'Times New Roman', serif;
  }

  /* --- ESTILO DA VALIDAÇÃO --- */
  .texto-validacao {
    font-family: 'Courier New', monospace;
    font-size: 10px;
    color: #777;
    display: inline-block;
  }

  .quebra {
    page-break-after: always;
  }
</style>

{% for inscricao in inscricoes %}

<table class="tabela-mestra">
  <tr>
    <td class="celula-topo">
      <div class="titulo">Certificado de Participação</div>
    </td>
  </tr>

  <tr>
    <td class="celula-meio">
      <div class="intro">Certificamos que</div>
      <div class="nome-aluno">{{ inscricao.user.first_name }} {{ inscricao.user.last_name }}</div>
      <div class="texto-detalhe">
        participou com êxito do evento
        <strong style="color: #003366;">{{ inscricao.evento.nome }}</strong>,<br>
        realizado em {{ inscricao.evento.data_inicio|date:"d \d\e F \d\e Y" }},
        com carga horária total de <strong>{{ inscricao.evento.carga_horaria_total }} horas</strong>.
      </div>
    </td>
  </tr>

  <tr>
    <td class="celula-assinaturas">
      <table class="tab-ass">
        <tr>
          <td>
            <div class="linha-ass"></div>
            <div class="cargo">Coordenação do Evento</div>
            <div class="inst">Instituto Federal de Brasília</div>
          </td>
          <td>
            <div class="linha-ass"></div>
            <div class="cargo">Diretoria de Extensão</div>
            <div class="inst">EventLab System</div>
          </td>
        </tr>
      </table>
    </td>
  </tr>

  <tr>
    <td class="celula-validacao">
      <div class="texto-validacao">
        Autenticação: #{{ inscricao.id }}<br>
        Emitido em: {% now "d/m/Y H:i" %}
      </div>
    </td>
  </tr>
</table>

{% if not forloop.last %}<div class="quebra"></div>{% endif %}

{% endfor %}
{% endblock %}